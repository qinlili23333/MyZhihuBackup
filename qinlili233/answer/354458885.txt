大多数游戏做多核优化的难点是什么？
<p data-pid="dA56SkOS">有些东西多核运行会速度开倒车的</p><p data-pid="WTc6_RY0">除了cpu运算，显卡渲染，中间还有大量时间用在io传输上了，多核处理那么核心之间也必须通信，这也需要io时间</p><p data-pid="40qqVkZc">通俗点讲，我有两道选择题要做，我一个人做要10秒一道，总计20秒，现在假设我有个女朋友（实际并没有），她也可以10秒一道，于是我给了她一道，给她题目我用了3秒，然后她找个位置坐下花了8秒，10秒后她做完了，又花了3秒走过来把答案告诉我，总计用时24秒...比我自己做完两道还特么慢了4秒</p><p data-pid="bTtZ-oHh">所以在排除部分程序员智力残疾的情况下，一些游戏它不适合多核负优化，没必要开这种倒车，它单线程速度更快，挺好的。</p><p data-pid="-ECYUBfJ">比如游戏中的血量计算，玩家受到伤害20，原血量80，游戏进程会执行80-20的计算，取返回值，置入血量这个变量。这个过程，只能单核，你总不可能拆成俩40-10给俩核心算吧。</p><p data-pid="JXyILTs-">但是游戏中也有一些可以多核计算的东西，比如解压/解密资源包，可以多核并行处理。又比如说一些游戏需要热更新资源的时候多线程下载可以cpu多核工作避免性能不足限制下载速度。</p><p data-pid="w4N5lowf">当然一些游戏也有自己的多核优化思路，那就是分离出多个进程，本体一条，反作弊一条，账户管理一条，游戏内氪金的webview进程再一条等等，然后一个游戏同时好几条进程（堡垒之夜就是这么干的），而避免全部寄生在主进程上运行。而一些进程在不需要时可以standby，不消耗cpu，比如webview虽然一般会预载入，但是正常情况都在standby，需要时再召唤出来，这样就减少读盘时间同时节约cpu资源。通俗讲就是工地上最多需要200人，但是我现在要打桩只需要20人，剩下180人过半小时就会用到，让他们回去睡觉（退出进程）肯定不合适，于是我就让它们站在边上待命，这样可以尽可能减少等待时间。</p>
1522553312