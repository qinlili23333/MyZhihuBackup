在浏览器地址栏输入一个URL后回车，背后会进行哪些技术步骤？
<p data-pid="HCmg5h_B">网络层面的其他大佬分析的很清楚了，我来分析一下在网络请求之前的</p><p data-pid="6R-ZR5kB">以安卓为例</p><p data-pid="DBbUEMcX">首先浏览器的地址栏应该是一个EditText（虽然用TextView也可以做，但是此处不讨论这种反人类的方案）</p><figure><noscript><img src="https://pic1.zhimg.com/v2-a8a60bd2a805218f0c355fb3ea0c535e_720w.png?source=3af55fa1" data-rawwidth="1080" data-rawheight="1920" class="origin_image zh-lightbox-thumb" width="1080" data-original="https://pica.zhimg.com/v2-a8a60bd2a805218f0c355fb3ea0c535e_r.jpg?source=3af55fa1"></noscript><img src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='1080'%20height='1920'&gt;&lt;/svg&gt;" data-rawwidth="1080" data-rawheight="1920" class="origin_image zh-lightbox-thumb lazy" width="1080" data-original="https://pica.zhimg.com/v2-a8a60bd2a805218f0c355fb3ea0c535e_r.jpg?source=3af55fa1" data-actualsrc="https://pic1.zhimg.com/v2-a8a60bd2a805218f0c355fb3ea0c535e_720w.png?source=3af55fa1"></figure><p data-pid="pZW_NK9t">我们把相关代码挖出来分析一下</p><p data-pid="wPoGPlR6">    .line 110</p><p data-pid="CpL4DiC0">    const-string/jumbo v1, "input_method"</p><p data-pid="-cuLTjLV">    invoke-virtual {p0, v1}, Lmoe/qinlili/MainActivity;-&gt;getSystemService(Ljava/lang/String;)Ljava/lang/Object;</p><p data-pid="VeLZ-ISQ">    move-result-object v0</p><p data-pid="55_n5h3U">    .line 109</p><p data-pid="G9qUdgR-">    check-cast v0, Landroid/view/inputmethod/InputMethodManager;</p><p data-pid="JbdVPOXM">//获取输入法服务</p><p data-pid="ujCUgJjO">    .line 111</p><p data-pid="UH-Zaw-e">    .local v0, "manager":Landroid/view/inputmethod/InputMethodManager;</p><p data-pid="gAIK_0ia">    invoke-virtual {p1}, Lmoe/qinlili/ui/EditTextExt;-&gt;getApplicationWindowToken()Landroid/os/IBinder;</p><p data-pid="8a3pdBr7">    move-result-object v1</p><p data-pid="w4F1648J">//获取窗口</p><p data-pid="35MDkN9K">    invoke-virtual {v0, v1, v2}, Landroid/view/inputmethod/InputMethodManager;-&gt;hideSoftInputFromWindow(Landroid/os/IBinder;I)Z</p><p data-pid="qNcYdj2O">//隐藏输入法</p><p data-pid="c78j07sr">    .line 113</p><p data-pid="g_Ve7wAE">    iget-object v1, p0, Lmoe/qinlili/MainActivity;-&gt;mWebView:Lmoe/qinlili/webview/WebViewExt;</p><p data-pid="nK1D2Vey">//获取webview</p><p data-pid="VDRFYB27">    invoke-virtual {p1}, Lmoe/qinlili/ui/EditTextExt;-&gt;getText()Landroid/text/Editable;</p><p data-pid="oQNU74nf">//获取你在地址栏里输入的地址</p><p data-pid="al7dTBeJ">    move-result-object v2</p><p data-pid="lm3rqqHW">    invoke-interface {v2}, Landroid/text/Editable;-&gt;toString()Ljava/lang/String;</p><p data-pid="HD-vIUMo">//转换成字符串，方便传递</p><p data-pid="g_E-7dUk">    move-result-object v2</p><p data-pid="ZFAl2F8-">    invoke-virtual {v1, v2}, Lmoe/qinlili/webview/WebViewExt;-&gt;loadUrl(Ljava/lang/String;)V</p><p data-pid="s2ceLCzJ">//请求webview加载地址</p><p data-pid="ZrqMw2-u">    .line 114</p><p data-pid="zrAMn3wy">    invoke-virtual {p1}, Lmoe/qinlili/ui/EditTextExt;-&gt;clearFocus()V</p><p data-pid="FDC8F6SL">//去除地址栏焦点</p><p data-pid="2bibaPDE">    .line 115</p><p data-pid="zbPKPjgt">    const/4 v1, 0x1</p><p data-pid="q5as92MN">    return v1</p><p data-pid="LBDold5t">//返回结果</p><br><p data-pid="2kzGRbjX">细心观察的可能还会发现，此处没有直接召唤系统webview，中间夹了一层代理层，我们再来分析代理层</p><br><br><p data-pid="bo0hEI7U">    invoke-static {p1}, Lmoe/qinlili/utils/UrlUtils;-&gt;smartUrlFilter(Ljava/lang/String;)Ljava/lang/String;</p><p data-pid="wrD0yF2R">//过滤地址格式</p><p data-pid="Bxxf0-NA">    move-result-object v0</p><p data-pid="kqyxWfJK">    .line 68</p><p data-pid="EcGIdWOt">    .local v0, "fixedUrl":Ljava/lang/String;</p><p data-pid="rtdf833q">    if-eqz v0, :cond_a</p><p data-pid="qca_8hwt">//检测到是一个正常的地址</p><p data-pid="w86j-6w_">    .line 69</p><p data-pid="RYhRB2m_">    invoke-super {p0, v0}, Landroid/webkit/WebView;-&gt;loadUrl(Ljava/lang/String;)V</p><p data-pid="w_ubKZE4">//提交加载</p><p data-pid="RtQZXsGu">    .line 70</p><p data-pid="ZdUukfbz">    return-void</p><p data-pid="Sd4WiSFZ">//返回结果</p><p data-pid="KifpfAty">    .line 73</p><p data-pid="L3BQ8Lis">    :cond_a//检测到是关键字，不是滴鼻</p><p data-pid="jZ0aQC_U">    iget-object v2, p0, Lmoe/qinlili/webview/WebViewExt;-&gt;mContext:Landroid/content/Context;</p><p data-pid="iYazML4J">    invoke-static {v2}, Lmoe/qinlili/utils/PrefsUtils;-&gt;getSearchEngine(Landroid/content/Context;)Ljava/lang/String;</p><p data-pid="oa1CT9oy">//获取搜索引擎</p><p data-pid="B_f7Sk9g">    move-result-object v1</p><p data-pid="WkjbeHc0">    .line 74</p><p data-pid="48UeG4Dl">    .local v1, "templateUri":Ljava/lang/String;</p><p data-pid="HXZFyyP3">    invoke-static {v1, p1}, Lmoe/qinlili/utils/UrlUtils;-&gt;getFormattedUri(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;</p><p data-pid="m2GdUJpR">//获取合并的搜索地址</p><p data-pid="2vikNwFv">    move-result-object v0</p><p data-pid="VpN9Mm-m">    .line 75</p><p data-pid="edZIY6gy">    if-eqz v0, :cond_19</p><p data-pid="YLRHFf0O">    .line 76</p><p data-pid="W9aLdSxA">    invoke-super {p0, v0}, Landroid/webkit/WebView;-&gt;loadUrl(Ljava/lang/String;)V</p><p data-pid="YFCS7MZe">//加载搜索地址</p><p data-pid="x-NznsQM">    .line 66</p><p data-pid="PRvRCpxY">    :cond_19</p><p data-pid="fBXd37Dh">    return-void</p><p data-pid="SvGpY78d">//返回</p><br><p data-pid="vCQs0ERM">这一个代理层，目的是实现输入关键词搜索功能，如果不需要这个功能，可以跳过这个代理层直接操作系统webview</p>
1543637233