利用JS替换解决polyv的015错误
<p data-pid="MlaCTAZj">先上015错误的分析:</p><p data-pid="jllFdJ_3">憨批polyv把idm下载插件判断为录屏插件了</p><p><br></p><p data-pid="tKKRdqQD">要我卸载idm那是不可能的,不然就没法方便的下载youtube视频了,而且如果我这么做那我也不是琴梨梨了</p><p data-pid="FZKGmsfy">ok,折腾走起!</p><p><br></p><p><br></p><p data-pid="dlHmGEY0">F12迅速定位js文件</p><p data-pid="HGr19xB0">chrome新版的pretty print很好用</p><figure data-size="normal"><noscript><img src="https://pic2.zhimg.com/v2-ba03035e4f5cd5dafec49f96cae55169_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="1398" data-rawheight="2003" class="origin_image zh-lightbox-thumb" width="1398" data-original="https://pic3.zhimg.com/v2-ba03035e4f5cd5dafec49f96cae55169_r.jpg?source=3af55fa1"></noscript><img src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='1398'%20height='2003'&gt;&lt;/svg&gt;" data-caption="" data-size="normal" data-rawwidth="1398" data-rawheight="2003" class="origin_image zh-lightbox-thumb lazy" width="1398" data-original="https://pic3.zhimg.com/v2-ba03035e4f5cd5dafec49f96cae55169_r.jpg?source=3af55fa1" data-actualsrc="https://pic2.zhimg.com/v2-ba03035e4f5cd5dafec49f96cae55169_720w.jpg?source=3af55fa1"></figure><p><br></p><p><br></p><p data-pid="Bc9W3XC5">返回去找到js地址<a href="http://link.zhihu.com/?target=https%3A//player.polyv.net/livescript/liveplayer.min.js" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">player.polyv.net/livesc</span><span class="invisible">ript/liveplayer.min.js</span><span class="ellipsis"></span></a></p><p data-pid="j5iLWIDQ">复制完整js到vscode,找到位置</p><figure data-size="normal"><noscript><img src="https://pica.zhimg.com/v2-1093739e0dd826769c40f832c1208d62_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="422" data-rawheight="55" class="origin_image zh-lightbox-thumb" width="422" data-original="https://pic3.zhimg.com/v2-1093739e0dd826769c40f832c1208d62_r.jpg?source=3af55fa1"></noscript><img src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='422'%20height='55'&gt;&lt;/svg&gt;" data-caption="" data-size="normal" data-rawwidth="422" data-rawheight="55" class="origin_image zh-lightbox-thumb lazy" width="422" data-original="https://pic3.zhimg.com/v2-1093739e0dd826769c40f832c1208d62_r.jpg?source=3af55fa1" data-actualsrc="https://pica.zhimg.com/v2-1093739e0dd826769c40f832c1208d62_720w.jpg?source=3af55fa1"></figure><p><br></p><p data-pid="72aFjiLV">这个js判断idm插入的关键attribute</p><p data-pid="AnSOdi70">把它改掉</p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-5d1eca14ac203f78653e05f3299d4773_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="331" data-rawheight="42" class="content_image" width="331"></noscript><img src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='331'%20height='42'&gt;&lt;/svg&gt;" data-caption="" data-size="normal" data-rawwidth="331" data-rawheight="42" class="content_image lazy" width="331" data-actualsrc="https://pic3.zhimg.com/v2-5d1eca14ac203f78653e05f3299d4773_720w.jpg?source=3af55fa1"></figure><p><br></p><p><br></p><p><br></p><p data-pid="g-IFuL4H">现在我们得到了一个修改后的js</p><p data-pid="GdpwCNih">那么怎么替换呢</p><p data-pid="9b3HOrGG">F12手动肯定太麻烦了,而且慢,在它检测之前肯定来不及替换,我手速又不是那种能fc六兆年的</p><p data-pid="DGpK-T8s">当然用插件</p><p data-pid="1i8OVM2Q">Gooreplacer最方便了</p><p><br></p><p data-pid="UlU2Ch1K">我把修改后的js传到github pages上,pages已配置cloudflare加速,得到一个修改版js的地址<a href="http://link.zhihu.com/?target=https%3A//redirect.qinlili.bid/test/polyvhook.js" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">redirect.qinlili.bid/te</span><span class="invisible">st/polyvhook.js</span><span class="ellipsis"></span></a></p><p><br></p><p data-pid="0FdaY_yw">按照下图填写Gooreplacer规则</p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-6c8abdedc84022e0bf3f15b033d1b612_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="821" data-rawheight="755" class="origin_image zh-lightbox-thumb" width="821" data-original="https://pic1.zhimg.com/v2-6c8abdedc84022e0bf3f15b033d1b612_r.jpg?source=3af55fa1"></noscript><img src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='821'%20height='755'&gt;&lt;/svg&gt;" data-caption="" data-size="normal" data-rawwidth="821" data-rawheight="755" class="origin_image zh-lightbox-thumb lazy" width="821" data-original="https://pic1.zhimg.com/v2-6c8abdedc84022e0bf3f15b033d1b612_r.jpg?source=3af55fa1" data-actualsrc="https://pic3.zhimg.com/v2-6c8abdedc84022e0bf3f15b033d1b612_720w.jpg?source=3af55fa1"></figure><p><br></p><p><br></p><p data-pid="9pUPfmbR">再次打开polyv直播页面</p><p data-pid="ZotJf6Fl">f12看看source里应该出现了自己的js,这样直播就没有015错误了,而且和idm插件完美共存</p><figure data-size="normal"><noscript><img src="https://pic3.zhimg.com/v2-185364400887295ef72a133e51f5de73_720w.jpg?source=3af55fa1" data-caption="" data-size="normal" data-rawwidth="1417" data-rawheight="685" class="origin_image zh-lightbox-thumb" width="1417" data-original="https://pic3.zhimg.com/v2-185364400887295ef72a133e51f5de73_r.jpg?source=3af55fa1"></noscript><img src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='1417'%20height='685'&gt;&lt;/svg&gt;" data-caption="" data-size="normal" data-rawwidth="1417" data-rawheight="685" class="origin_image zh-lightbox-thumb lazy" width="1417" data-original="https://pic3.zhimg.com/v2-185364400887295ef72a133e51f5de73_r.jpg?source=3af55fa1" data-actualsrc="https://pic3.zhimg.com/v2-185364400887295ef72a133e51f5de73_720w.jpg?source=3af55fa1"></figure><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><h2>思考题:如果在一个没有外网且无法自己搭建服务器的环境,该怎么使用Gooreplacer呢?(先别看答案)</h2><div class="highlight"><pre><code class="language-text"><span></span>思考题答案:你试着在浏览器地址栏里输入data:text/html,000
这时候你的网页就会变成000
data url可以在本地实现hook
把js文件转成base64,然后在目标地址里填写data:text/javascript;base64,经过base64后的js
这样就可以本地hook了
</code></pre></div><p></p><p></p><p></p><p></p>